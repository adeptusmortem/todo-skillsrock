# Проект: API для работы с TODO листами

## Описание проекта
Проект представляет собой RESTful API для управления задачами (TODO листами). Пользователи могут создавать, просматривать, обновлять и удалять задачи. API разработан на языке программирования Go с использованием фреймворка Fiber для обработки HTTP-запросов и библиотеки GORM для работы с базой данных.

---

## Технический стек
- **Язык программирования**: Go 1.23.5
- **Фреймворк**: [Fiber](https://gofiber.io/)
- **ORM**: [GORM](https://gorm.io/)
- **База данных**: PostgreSQL

---

## Структура базы данных

Таблица `tasks` содержит следующие поля:

| Поле          | Тип           | Описание                                                                 |
|---------------|---------------|-------------------------------------------------------------------------|
| `id`          | SERIAL        | Уникальный идентификатор задачи (первичный ключ).                       |
| `title`       | TEXT          | Название задачи (обязательное поле).                                    |
| `description` | TEXT          | Описание задачи (необязательное поле).                                  |
| `status`      | TEXT          | Статус задачи. Допустимые значения: `'new'`, `'in_progress'`, `'done'`. |
| `created_at`  | TIMESTAMP     | Время создания задачи (по умолчанию текущее время).                     |
| `updated_at`  | TIMESTAMP     | Время последнего обновления задачи (по умолчанию текущее время).        |

SQL-схема:
```sql
CREATE TABLE tasks (
    id SERIAL PRIMARY KEY,
    title TEXT NOT NULL,
    description TEXT,
    status TEXT CHECK (status IN ('new', 'in_progress', 'done')) DEFAULT 'new',
    created_at TIMESTAMP DEFAULT now(),
    updated_at TIMESTAMP DEFAULT now()
);
```

Реализованные HTTP методы
-------------------------

### 1\. Создание задачи

*   **Метод** : **POST**
    
*   **URL** : **/task**
    
*   **Описание** : Создает новую задачу.
    
*   **Обработчик** : **handlers.CreateTask**
    
*   **Пример запроса** :
```json
{ 
    "title": "Новая задача", 
    "description": "Описание задачи", 
    "status": "new"
}
```
    
*   **Пример ответа** :
```json
{ 
    "id": 1, 
    "title": "Новая задача", 
    "description": "Описание задачи", 
    "status": "new", 
    "created\_at": "2023-10-01T12:00:00Z", 
    "updated\_at": "2023-10-01T12:00:00Z"
}
```

### 2\. Получение списка задач

*   **Метод** : **GET**
    
*   **URL** : **/task**
    
*   **Описание** : Возвращает список всех задач.
    
*   **Обработчик** : **handlers.GetTasks**
    
*   **Пример ответа** 
```json
[ 
    { 
        "id": 1, 
        "title": "Новая задача", 
        "description": "Описание задачи", 
        "status": "new", 
        "created_at": "2023-10-01T12:00:00Z", 
        "updated_at": "2023-10-01T12:00:00Z" 
    }, 
    { 
        "id": 2, 
        "title": "Вторая задача", 
        "description": "Еще одно описание", 
        "status": "in_progress", 
        "created_at": "2023-10-01T12:10:00Z", 
        "updated_at": "2023-10-01T12:15:00Z" 
    }
]
```

### 3\. Получение задачи по ID

*   **Метод** : **GET**
    
*   **URL** : **/task/:id**
    
*   **Описание** : Возвращает задачу по её уникальному идентификатору.
    
*   **Обработчик** : **handlers.GetTask**
    
*   **Пример ответа** :
```json
{ 
    "id": 1, 
    "title": "Новая задача", 
    "description": "Описание задачи", 
    "status": "new", 
    "created_at": "2023-10-01T12:00:00Z", 
    "updated_at": "2023-10-01T12:00:00Z"
}
 ```   

### 4\. Обновление задачи

*   **Метод** : **PUT**
    
*   **URL** : **/task/:id**
    
*   **Описание** : Обновляет данные задачи по её уникальному идентификатору.
    
*   **Обработчик** : **handlers.UpdateTask**
    
*   **Пример запроса** :
```json
{ 
    "title": "Обновленная задача", 
    "status": "done"
}
```
    
*   **Пример ответа** :
```json
{
    "id": 1, 
    "title": "Обновленная задача", 
    "description": "Описание задачи", 
    "status": "done", 
    "created_at": "2023-10-01T12:00:00Z", 
    "updated_at": "2023-10-01T12:30:00Z"
}
```

### 5\. Удаление задачи

*   **Метод** : **DELETE**
    
*   **URL** : **/task/:id**
    
*   **Описание** : Удаляет задачу по её ID.
    
*   **Обработчик** : **handlers.DeleteTask**
    
*   **Пример ответа** :
```json
{ 
    "message": "Succesfully deleted!"
}
```

Особенности реализации
----------------------

1.  **Миграции GORM** :
    
    *   Используются миграции GORM для автоматического создания и обновления таблиц в базе данных.
     
        
2.  **Обработка ошибок** :
    
    *   Реализована обработка ошибок при подключении к базе данных.
        
    *   В обработчиках запросов предусмотрена проверка входных данных и возврат соответствующих HTTP-статусов (например, **400 Bad Request**, **404 Not Found**, **500 Internal Server Error**).
        
3.  **Валидация данных** :
    
    *   Поля **title** и **status** проверяются на корректность перед сохранением в базу данных.
        
4.  **Автоматическое обновление временных меток** :
    
    *   Поля **created\_at** и **updated\_at** автоматически заполняются при создании и обновлении записи.
        

Запуск проекта
--------------

1.  **Установка зависимостей**
```bas
go mod download
```
    
2.  **Настройка подключения к базе данных** :
    
    *   В пакете `main` заменить `sConnection` на валидный адрес к БД
        
    
3.  **Запуск сервера**
```bash
go run main.go
```
    